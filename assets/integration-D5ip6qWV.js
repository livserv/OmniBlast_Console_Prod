import{n,c as i}from"../index.BVMPhNmP.js";const g=n((a,o)=>({integrations:[],selectedIntegration:void 0,isLoading:!1,error:void 0,loadIntegrations:async()=>{a({isLoading:!0,error:void 0});try{const e=await i.get("/api/integrations");a(e?{integrations:e||[],isLoading:!1}:{error:e.message||"Failed to load integrations",isLoading:!1})}catch(e){a({error:e.message||"Failed to load integrations",isLoading:!1})}},getIntegrationById:async e=>{a({isLoading:!0,error:void 0});try{const r=await i.get(`/api/integrations/${e}`);a({selectedIntegration:r,isLoading:!1})}catch(r){a({error:r.message||"Failed to load integration",isLoading:!1})}},createIntegration:async e=>{a({isLoading:!0,error:void 0});try{const r=await i.post("/api/integrations",e);if(r)await o().loadIntegrations(),a({isLoading:!1});else throw a({error:r.message||"Failed to create integration",isLoading:!1}),new Error(r.message)}catch(r){throw a({error:r.message||"Failed to create integration",isLoading:!1}),r}},updateIntegration:async(e,r)=>{a({isLoading:!0,error:void 0});try{await i.put(`/api/integrations/${e}`,r),await o().loadIntegrations(),a({isLoading:!1})}catch(t){throw a({error:t.message||"Failed to update integration",isLoading:!1}),t}},deleteIntegration:async e=>{a({isLoading:!0,error:void 0});try{await i.delete(`/api/integrations/${e}`),await o().loadIntegrations(),a({isLoading:!1})}catch(r){throw a({error:r.message||"Failed to delete integration",isLoading:!1}),r}},testIntegration:async e=>{a({isLoading:!0,error:void 0});try{return await i.post(`/api/integrations/${e}/test`,{}),a({isLoading:!1}),!0}catch(r){return a({error:r.message||"Integration test failed",isLoading:!1}),!1}},clearError:()=>a({error:void 0})}));export{g as u};
