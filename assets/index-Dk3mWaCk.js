import{f as u,u as j,r as m,e as v,j as e,d as c,B as r,h as w,i as N,s as x}from"../index.BVMPhNmP.js";import{u as p}from"./integration-D5ip6qWV.js";import{L as k}from"./LoadingSpinner-6bdEt-iZ.js";const I=({integration:s})=>{const a=u(),{user:t}=j(),{deleteIntegration:o,testIntegration:h}=p(),[g,l]=m.useState(!1),n=(s.type==="gupshup"||s.type==="whatsapp")&&s.id&&t?.organizationId?`${v.apiExternalBasePath}/api/webhooks/${s.type}/${t.organizationId}/${s.id}/callback`:"",y=async()=>{n&&(await navigator.clipboard.writeText(n),l(!0),setTimeout(()=>l(!1),2e3))},b=async()=>{await h(s.id)?x("Integration test completed successfully.","Test Passed",{type:"success"}):x("Please check your configuration and try again.","Test Failed",{type:"error"})},f=async()=>{window.confirm("Are you sure you want to delete this integration?")&&await o(s.id)},d=(i=>{switch(i){case"email":return"blue";case"gupshup":return"green";case"whatsapp":return"green";case"sms":return"purple";case"telegram":return"cyan";default:return"gray"}})(s.type);return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`w-12 h-12 bg-${d}-100 rounded-lg flex items-center justify-center`,children:e.jsx("span",{className:`text-${d}-600 font-bold text-lg uppercase`,children:s.type.substring(0,2)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[(s.type==="gupshup"||s.type==="whatsapp")&&e.jsx("div",{className:c("px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1",s.webhookValidated?"bg-blue-100 text-blue-700":"bg-yellow-100 text-yellow-700"),title:s.webhookValidated?`Webhook validated on ${new Date(s.webhookValidatedAt).toLocaleString()}`:"Webhook not yet validated. Copy and configure the webhook URL in your provider dashboard.",children:s.webhookValidated?"✓ Webhook":"⚠ Webhook"}),e.jsx("div",{className:c("px-2 py-1 rounded-full text-xs font-medium",s.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"),children:s.isActive?"Active":"Inactive"})]})]}),e.jsx("h3",{className:"font-semibold text-gray-900 text-lg mb-1",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 uppercase mb-4",children:s.type}),e.jsx("div",{className:"text-xs text-gray-500 mb-4",children:e.jsxs("p",{children:["Created: ",new Date(s.createdAt).toLocaleDateString()]})}),n&&e.jsxs("div",{className:"mb-4 bg-gray-50 border border-gray-200 rounded-md p-3",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Webhook URL"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",readOnly:!0,value:n,className:"flex-1 px-2 py-1 text-xs bg-white border border-gray-300 rounded font-mono text-gray-700"}),e.jsx(r,{type:"button",variant:"default",size:"sm",onClick:y,children:g?"Copied!":"Copy"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(r,{variant:"default",size:"sm",onClick:b,className:"flex-1",children:"Test"}),e.jsx(r,{variant:"primary",size:"sm",layout:"plain",leftIcon:w,onClick:()=>a(`/integrations/${s.id}/edit`)}),e.jsx(r,{variant:"danger",layout:"plain",size:"sm",leftIcon:N,onClick:f})]})]})},C=({integrations:s,isLoading:a})=>a?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(k,{})}):s.length===0?e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-12 text-center",children:[e.jsx("p",{className:"text-gray-500 text-lg",children:"No integrations configured"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Add your first integration to start sending campaigns"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(t=>e.jsx(I,{integration:t},t.id))}),$=()=>{const s=u(),{loadIntegrations:a,integrations:t,isLoading:o}=p();return m.useEffect(()=>{a()},[]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Integrations"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Connect and manage your marketing channels"})]}),e.jsx(r,{onClick:()=>s("/integrations/create"),children:"Add Integration"})]}),e.jsx(C,{integrations:t,isLoading:o})]})};export{$ as default};
