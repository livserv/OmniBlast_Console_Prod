{"version":3,"file":"index-BQ0716AC.js","sources":["../../../src/pages/integrations/IntegrationCard.tsx","../../../src/pages/integrations/IntegrationList.tsx","../../../src/pages/integrations/index.tsx"],"sourcesContent":["import classNames from 'classnames';\r\nimport { Button, showSnackbar } from 'ether-ui';\r\nimport { EditIcon, TrashIcon } from 'ether-ui/icons';\r\nimport React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Integration } from '../../../types/integration';\r\nimport env from '../../common/env';\r\nimport { useAuthStore } from '../../services/auth';\r\nimport { useIntegrationStore } from '../../services/integration';\r\n\r\ninterface IntegrationCardProps {\r\n    integration: Integration;\r\n}\r\n\r\nexport const IntegrationCard: React.FC<IntegrationCardProps> = ({ integration }) => {\r\n    const navigate = useNavigate();\r\n    const { user } = useAuthStore();\r\n    const { deleteIntegration, testIntegration } = useIntegrationStore();\r\n    const [copiedWebhook, setCopiedWebhook] = useState(false);\r\n\r\n    const webhookUrl =\r\n        (integration.type === 'gupshup' || integration.type === 'whatsapp') && integration.id && user?.organizationId\r\n            ? `${env.apiExternalBasePath}/api/webhooks/${integration.type}/${user.organizationId}/${integration.id}/callback`\r\n            : '';\r\n\r\n    const handleCopyWebhook = async () => {\r\n        if (webhookUrl) {\r\n            await navigator.clipboard.writeText(webhookUrl);\r\n            setCopiedWebhook(true);\r\n            setTimeout(() => setCopiedWebhook(false), 2000);\r\n        }\r\n    };\r\n\r\n    const handleTest = async () => {\r\n        const success = await testIntegration(integration.id);\r\n        if (success) {\r\n            showSnackbar('Integration test completed successfully.', 'Test Passed', { type: 'success' });\r\n        } else {\r\n            showSnackbar('Please check your configuration and try again.', 'Test Failed', { type: 'error' });\r\n        }\r\n    };\r\n\r\n    const handleDelete = async () => {\r\n        if (window.confirm('Are you sure you want to delete this integration?')) {\r\n            await deleteIntegration(integration.id);\r\n        }\r\n    };\r\n\r\n    const getIntegrationColor = (type: string) => {\r\n        switch (type) {\r\n            case 'email':\r\n                return 'blue';\r\n            case 'gupshup':\r\n                return 'green';\r\n            case 'whatsapp':\r\n                return 'green';\r\n            case 'sms':\r\n                return 'purple';\r\n            case 'telegram':\r\n                return 'cyan';\r\n            default:\r\n                return 'gray';\r\n        }\r\n    };\r\n\r\n    const color = getIntegrationColor(integration.type);\r\n\r\n    return (\r\n        <div className=\"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow\">\r\n            <div className=\"flex items-start justify-between mb-4\">\r\n                <div className={`w-12 h-12 bg-${color}-100 rounded-lg flex items-center justify-center`}>\r\n                    <span className={`text-${color}-600 font-bold text-lg uppercase`}>{integration.type.substring(0, 2)}</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                    {(integration.type === 'gupshup' || integration.type === 'whatsapp') && (\r\n                        <div\r\n                            className={classNames(\r\n                                'px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1',\r\n                                integration.webhookValidated ? 'bg-blue-100 text-blue-700' : 'bg-yellow-100 text-yellow-700'\r\n                            )}\r\n                            title={\r\n                                integration.webhookValidated\r\n                                    ? `Webhook validated on ${new Date(integration.webhookValidatedAt!).toLocaleString()}`\r\n                                    : 'Webhook not yet validated. Copy and configure the webhook URL in your provider dashboard.'\r\n                            }\r\n                        >\r\n                            {integration.webhookValidated ? '✓ Webhook' : '⚠ Webhook'}\r\n                        </div>\r\n                    )}\r\n                    <div\r\n                        className={classNames(\r\n                            'px-2 py-1 rounded-full text-xs font-medium',\r\n                            integration.isActive ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-700'\r\n                        )}\r\n                    >\r\n                        {integration.isActive ? 'Active' : 'Inactive'}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <h3 className=\"font-semibold text-gray-900 text-lg mb-1\">{integration.name}</h3>\r\n            <p className=\"text-sm text-gray-600 uppercase mb-4\">{integration.type}</p>\r\n\r\n            <div className=\"text-xs text-gray-500 mb-4\">\r\n                <p>Created: {new Date(integration.createdAt).toLocaleDateString()}</p>\r\n            </div>\r\n\r\n            {webhookUrl && (\r\n                <div className=\"mb-4 bg-gray-50 border border-gray-200 rounded-md p-3\">\r\n                    <label className=\"block text-xs font-medium text-gray-600 mb-1\">Webhook URL</label>\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <input\r\n                            type=\"text\"\r\n                            readOnly\r\n                            value={webhookUrl}\r\n                            className=\"flex-1 px-2 py-1 text-xs bg-white border border-gray-300 rounded font-mono text-gray-700\"\r\n                        />\r\n                        <Button type=\"button\" variant=\"default\" size=\"sm\" onClick={handleCopyWebhook}>\r\n                            {copiedWebhook ? 'Copied!' : 'Copy'}\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"flex space-x-2\">\r\n                <Button variant=\"default\" size=\"sm\" onClick={handleTest} className=\"flex-1\">\r\n                    Test\r\n                </Button>\r\n                <Button\r\n                    variant=\"primary\"\r\n                    size=\"sm\"\r\n                    layout=\"plain\"\r\n                    leftIcon={EditIcon}\r\n                    onClick={() => navigate(`/integrations/${integration.id}/edit`)}\r\n                />\r\n                <Button variant=\"danger\" layout=\"plain\" size=\"sm\" leftIcon={TrashIcon} onClick={handleDelete} />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport { Integration } from '../../../types/integration';\r\nimport { LoadingSpinner } from '../../components/LoadingSpinner';\r\nimport { IntegrationCard } from './IntegrationCard';\r\n\r\ninterface IntegrationListProps {\r\n    integrations: Integration[];\r\n    isLoading: boolean;\r\n}\r\n\r\nexport const IntegrationList: React.FC<IntegrationListProps> = ({ integrations, isLoading }) => {\r\n    if (isLoading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center py-12\">\r\n                <LoadingSpinner />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (integrations.length === 0) {\r\n        return (\r\n            <div className=\"bg-white rounded-lg border border-gray-200 p-12 text-center\">\r\n                <p className=\"text-gray-500 text-lg\">No integrations configured</p>\r\n                <p className=\"text-gray-400 text-sm mt-2\">Add your first integration to start sending campaigns</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n            {integrations.map((integration) => (\r\n                <IntegrationCard key={integration.id} integration={integration} />\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n","import { Button } from 'ether-ui';\r\nimport React, { useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useIntegrationStore } from '../../services/integration';\r\nimport { IntegrationList } from './IntegrationList';\r\n\r\nconst Integrations: React.FC = () => {\r\n    const navigate = useNavigate();\r\n    const { loadIntegrations, integrations, isLoading } = useIntegrationStore();\r\n\r\n    useEffect(() => {\r\n        loadIntegrations();\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                    <h2 className=\"text-2xl font-bold text-gray-900\">Integrations</h2>\r\n                    <p className=\"text-gray-600 mt-1\">Connect and manage your marketing channels</p>\r\n                </div>\r\n                <Button onClick={() => navigate('/integrations/create')}>Add Integration</Button>\r\n            </div>\r\n\r\n            <IntegrationList integrations={integrations} isLoading={isLoading} />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Integrations;\r\n"],"names":["IntegrationCard","integration","navigate","useNavigate","user","useAuthStore","deleteIntegration","testIntegration","useIntegrationStore","copiedWebhook","setCopiedWebhook","useState","webhookUrl","env","handleCopyWebhook","handleTest","showSnackbar","handleDelete","color","type","jsxs","jsx","classNames","Button","EditIcon","TrashIcon","IntegrationList","integrations","isLoading","LoadingSpinner","Integrations","loadIntegrations","useEffect"],"mappings":"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"}