{"version":3,"file":"template-DSp6XXWb.js","sources":["../../../src/services/template.ts"],"sourcesContent":["import { create } from 'zustand';\r\nimport { CreateTemplateRequest, IntegrationType, Template, TemplateStatus, UpdateTemplateRequest } from '../../types/template';\r\nimport ajax from './ajax';\r\n\r\ninterface TemplateState {\r\n    templates: Template[];\r\n    selectedTemplate: Template | null;\r\n    isLoading: boolean;\r\n    error: string | null;\r\n    filters: {\r\n        type?: IntegrationType;\r\n        status?: TemplateStatus;\r\n        integrationId?: string;\r\n    };\r\n}\r\n\r\ninterface TemplateActions {\r\n    loadTemplates: (filters?: { type?: string; status?: string; integrationId?: string }) => Promise<void>;\r\n    getTemplateById: (id: string) => Promise<void>;\r\n    createTemplate: (data: CreateTemplateRequest) => Promise<void>;\r\n    updateTemplate: (id: string, data: UpdateTemplateRequest) => Promise<void>;\r\n    deleteTemplate: (id: string) => Promise<void>;\r\n    setFilters: (filters: { type?: IntegrationType; status?: TemplateStatus; integrationId?: string }) => void;\r\n    clearError: () => void;\r\n}\r\n\r\ntype TemplateStore = TemplateState & TemplateActions;\r\n\r\nexport const useTemplateStore = create<TemplateStore>((set, get) => ({\r\n    templates: [],\r\n    selectedTemplate: null,\r\n    isLoading: false,\r\n    error: null,\r\n    filters: { status: 'approved' },\r\n\r\n    loadTemplates: async (filters) => {\r\n        set({ isLoading: true, error: null });\r\n        try {\r\n            const params = new URLSearchParams();\r\n            if (filters?.type) params.append('type', filters.type);\r\n            if (filters?.status) params.append('status', filters.status);\r\n            if (filters?.integrationId) params.append('integrationId', filters.integrationId);\r\n\r\n            const templates = await ajax.get(`/api/templates?${params.toString()}`);\r\n            if (Array.isArray(templates)) {\r\n                set({ templates, isLoading: false });\r\n            } else {\r\n                set({ error: 'Failed to load templates', isLoading: false });\r\n            }\r\n        } catch (error: any) {\r\n            set({ error: error.message || 'Failed to load templates', isLoading: false });\r\n        }\r\n    },\r\n\r\n    getTemplateById: async (id: string) => {\r\n        set({ isLoading: true, error: null });\r\n        try {\r\n            const response = await ajax.get(`/api/templates/${id}`);\r\n            if (response.success) {\r\n                set({ selectedTemplate: response.data, isLoading: false });\r\n            } else {\r\n                set({ error: response.message || 'Failed to load template', isLoading: false });\r\n            }\r\n        } catch (error: any) {\r\n            set({ error: error.message || 'Failed to load template', isLoading: false });\r\n        }\r\n    },\r\n\r\n    createTemplate: async (data: CreateTemplateRequest) => {\r\n        set({ isLoading: true, error: null });\r\n        try {\r\n            const response = await ajax.post('/api/templates', data);\r\n            if (response.success) {\r\n                await get().loadTemplates(get().filters);\r\n                set({ isLoading: false });\r\n            } else {\r\n                set({ error: response.message || 'Failed to create template', isLoading: false });\r\n                throw new Error(response.message);\r\n            }\r\n        } catch (error: any) {\r\n            set({ error: error.message || 'Failed to create template', isLoading: false });\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    updateTemplate: async (id: string, data: UpdateTemplateRequest) => {\r\n        set({ isLoading: true, error: null });\r\n        try {\r\n            const response = await ajax.put(`/api/templates/${id}`, data);\r\n            if (response.success) {\r\n                await get().loadTemplates(get().filters);\r\n                set({ isLoading: false });\r\n            } else {\r\n                set({ error: response.message || 'Failed to update template', isLoading: false });\r\n                throw new Error(response.message);\r\n            }\r\n        } catch (error: any) {\r\n            set({ error: error.message || 'Failed to update template', isLoading: false });\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    deleteTemplate: async (id: string) => {\r\n        set({ isLoading: true, error: null });\r\n        try {\r\n            const response = await ajax.delete(`/api/templates/${id}`);\r\n            if (response.success) {\r\n                await get().loadTemplates(get().filters);\r\n                set({ isLoading: false });\r\n            } else {\r\n                set({ error: response.message || 'Failed to delete template', isLoading: false });\r\n                throw new Error(response.message);\r\n            }\r\n        } catch (error: any) {\r\n            set({ error: error.message || 'Failed to delete template', isLoading: false });\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    setFilters: (filters) => {\r\n        set({ filters });\r\n        get().loadTemplates(filters);\r\n    },\r\n\r\n    clearError: () => set({ error: null }),\r\n}));\r\n"],"names":["useTemplateStore","create","set","get","filters","params","templates","ajax","error","id","response","data"],"mappings":"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"}