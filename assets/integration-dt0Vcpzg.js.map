{"version":3,"file":"integration-dt0Vcpzg.js","sources":["../../../src/services/integration.ts"],"sourcesContent":["import { create } from 'zustand';\r\nimport { CreateIntegrationRequest, Integration, UpdateIntegrationRequest } from '../../types/integration';\r\nimport ajax from './ajax';\r\n\r\ninterface IntegrationState {\r\n    integrations: Integration[];\r\n    selectedIntegration?: Integration;\r\n    isLoading: boolean;\r\n    error?: string;\r\n}\r\n\r\ninterface IntegrationActions {\r\n    loadIntegrations: () => Promise<void>;\r\n    getIntegrationById: (id: string) => Promise<void>;\r\n    createIntegration: (data: CreateIntegrationRequest) => Promise<void>;\r\n    updateIntegration: (id: string, data: UpdateIntegrationRequest) => Promise<void>;\r\n    deleteIntegration: (id: string) => Promise<void>;\r\n    testIntegration: (id: string) => Promise<boolean>;\r\n    clearError: () => void;\r\n}\r\n\r\ntype IntegrationStore = IntegrationState & IntegrationActions;\r\n\r\nexport const useIntegrationStore = create<IntegrationStore>((set, get) => ({\r\n    integrations: [],\r\n    selectedIntegration: undefined,\r\n    isLoading: false,\r\n    error: undefined,\r\n\r\n    loadIntegrations: async () => {\r\n        set({ isLoading: true, error: undefined });\r\n        try {\r\n            const response = await ajax.get('/api/integrations');\r\n            if (response) {\r\n                set({ integrations: response || [], isLoading: false });\r\n            } else {\r\n                set({ error: response.message || 'Failed to load integrations', isLoading: false });\r\n            }\r\n        } catch (error: any) {\r\n            set({ error: error.message || 'Failed to load integrations', isLoading: false });\r\n        }\r\n    },\r\n\r\n    getIntegrationById: async (id: string) => {\r\n        set({ isLoading: true, error: undefined });\r\n        try {\r\n            const response = await ajax.get(`/api/integrations/${id}`);\r\n            set({ selectedIntegration: response, isLoading: false });\r\n        } catch (error: any) {\r\n            set({ error: error.message || 'Failed to load integration', isLoading: false });\r\n        }\r\n    },\r\n\r\n    createIntegration: async (data: CreateIntegrationRequest) => {\r\n        set({ isLoading: true, error: undefined });\r\n        try {\r\n            const response = await ajax.post('/api/integrations', data);\r\n            if (response) {\r\n                await get().loadIntegrations();\r\n                set({ isLoading: false });\r\n            } else {\r\n                set({ error: response.message || 'Failed to create integration', isLoading: false });\r\n                throw new Error(response.message);\r\n            }\r\n        } catch (error: any) {\r\n            set({ error: error.message || 'Failed to create integration', isLoading: false });\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    updateIntegration: async (id: string, data: UpdateIntegrationRequest) => {\r\n        set({ isLoading: true, error: undefined });\r\n        try {\r\n            await ajax.put(`/api/integrations/${id}`, data);\r\n            await get().loadIntegrations();\r\n            set({ isLoading: false });\r\n        } catch (error: any) {\r\n            set({ error: error.message || 'Failed to update integration', isLoading: false });\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    deleteIntegration: async (id: string) => {\r\n        set({ isLoading: true, error: undefined });\r\n        try {\r\n            await ajax.delete(`/api/integrations/${id}`);\r\n            await get().loadIntegrations();\r\n            set({ isLoading: false });\r\n        } catch (error: any) {\r\n            set({ error: error.message || 'Failed to delete integration', isLoading: false });\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    testIntegration: async (id: string) => {\r\n        set({ isLoading: true, error: undefined });\r\n        try {\r\n            await ajax.post(`/api/integrations/${id}/test`, {});\r\n            set({ isLoading: false });\r\n            return true;\r\n        } catch (error: any) {\r\n            set({ error: error.message || 'Integration test failed', isLoading: false });\r\n            return false;\r\n        }\r\n    },\r\n\r\n    clearError: () => set({ error: undefined }),\r\n}));\r\n"],"names":["useIntegrationStore","create","set","get","response","ajax","error","id","data"],"mappings":"2CAuBO,MAAMA,EAAsBC,EAAyB,CAACC,EAAKC,KAAS,CACvE,aAAc,CAAA,EACd,oBAAqB,OACrB,UAAW,GACX,MAAO,OAEP,iBAAkB,SAAY,CAC1BD,EAAI,CAAE,UAAW,GAAM,MAAO,OAAW,EACzC,GAAI,CACA,MAAME,EAAW,MAAMC,EAAK,IAAI,mBAAmB,EAE/CH,EADAE,EACI,CAAE,aAAcA,GAAY,CAAA,EAAI,UAAW,IAE3C,CAAE,MAAOA,EAAS,SAAW,8BAA+B,UAAW,GAFrB,CAI9D,OAASE,EAAY,CACjBJ,EAAI,CAAE,MAAOI,EAAM,SAAW,8BAA+B,UAAW,GAAO,CACnF,CACJ,EAEA,mBAAoB,MAAOC,GAAe,CACtCL,EAAI,CAAE,UAAW,GAAM,MAAO,OAAW,EACzC,GAAI,CACA,MAAME,EAAW,MAAMC,EAAK,IAAI,qBAAqBE,CAAE,EAAE,EACzDL,EAAI,CAAE,oBAAqBE,EAAU,UAAW,GAAO,CAC3D,OAASE,EAAY,CACjBJ,EAAI,CAAE,MAAOI,EAAM,SAAW,6BAA8B,UAAW,GAAO,CAClF,CACJ,EAEA,kBAAmB,MAAOE,GAAmC,CACzDN,EAAI,CAAE,UAAW,GAAM,MAAO,OAAW,EACzC,GAAI,CACA,MAAME,EAAW,MAAMC,EAAK,KAAK,oBAAqBG,CAAI,EAC1D,GAAIJ,EACA,MAAMD,EAAA,EAAM,iBAAA,EACZD,EAAI,CAAE,UAAW,GAAO,MAExB,OAAAA,EAAI,CAAE,MAAOE,EAAS,SAAW,+BAAgC,UAAW,GAAO,EAC7E,IAAI,MAAMA,EAAS,OAAO,CAExC,OAASE,EAAY,CACjB,MAAAJ,EAAI,CAAE,MAAOI,EAAM,SAAW,+BAAgC,UAAW,GAAO,EAC1EA,CACV,CACJ,EAEA,kBAAmB,MAAOC,EAAYC,IAAmC,CACrEN,EAAI,CAAE,UAAW,GAAM,MAAO,OAAW,EACzC,GAAI,CACA,MAAMG,EAAK,IAAI,qBAAqBE,CAAE,GAAIC,CAAI,EAC9C,MAAML,EAAA,EAAM,iBAAA,EACZD,EAAI,CAAE,UAAW,GAAO,CAC5B,OAASI,EAAY,CACjB,MAAAJ,EAAI,CAAE,MAAOI,EAAM,SAAW,+BAAgC,UAAW,GAAO,EAC1EA,CACV,CACJ,EAEA,kBAAmB,MAAOC,GAAe,CACrCL,EAAI,CAAE,UAAW,GAAM,MAAO,OAAW,EACzC,GAAI,CACA,MAAMG,EAAK,OAAO,qBAAqBE,CAAE,EAAE,EAC3C,MAAMJ,EAAA,EAAM,iBAAA,EACZD,EAAI,CAAE,UAAW,GAAO,CAC5B,OAASI,EAAY,CACjB,MAAAJ,EAAI,CAAE,MAAOI,EAAM,SAAW,+BAAgC,UAAW,GAAO,EAC1EA,CACV,CACJ,EAEA,gBAAiB,MAAOC,GAAe,CACnCL,EAAI,CAAE,UAAW,GAAM,MAAO,OAAW,EACzC,GAAI,CACA,aAAMG,EAAK,KAAK,qBAAqBE,CAAE,QAAS,EAAE,EAClDL,EAAI,CAAE,UAAW,GAAO,EACjB,EACX,OAASI,EAAY,CACjB,OAAAJ,EAAI,CAAE,MAAOI,EAAM,SAAW,0BAA2B,UAAW,GAAO,EACpE,EACX,CACJ,EAEA,WAAY,IAAMJ,EAAI,CAAE,MAAO,OAAW,CAC9C,EAAE"}