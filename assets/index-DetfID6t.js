import{f as x,u as f,r as m,e as j,j as e,d as c,B as r,h as v,i as w}from"../index.ChXpIm8i.js";import{u}from"./integration-dt0Vcpzg.js";import{L as N}from"./LoadingSpinner-BKInrR1l.js";const k=({integration:t})=>{const a=x(),{user:s}=f(),{deleteIntegration:o,testIntegration:p}=u(),[h,i]=m.useState(!1),n=(t.type==="gupshup"||t.type==="whatsapp")&&t.id&&s?.organizationId?`${j.apiExternalBasePath}/api/webhooks/${t.type}/${s.organizationId}/${t.id}/callback`:"",g=async()=>{n&&(await navigator.clipboard.writeText(n),i(!0),setTimeout(()=>i(!1),2e3))},y=async()=>{const l=await p(t.id);alert(l?"Integration test successful!":"Integration test failed. Please check your configuration.")},b=async()=>{window.confirm("Are you sure you want to delete this integration?")&&await o(t.id)},d=(l=>{switch(l){case"email":return"blue";case"gupshup":return"green";case"whatsapp":return"green";case"sms":return"purple";case"telegram":return"cyan";default:return"gray"}})(t.type);return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`w-12 h-12 bg-${d}-100 rounded-lg flex items-center justify-center`,children:e.jsx("span",{className:`text-${d}-600 font-bold text-lg uppercase`,children:t.type.substring(0,2)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[(t.type==="gupshup"||t.type==="whatsapp")&&e.jsx("div",{className:c("px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1",t.webhookValidated?"bg-blue-100 text-blue-700":"bg-yellow-100 text-yellow-700"),title:t.webhookValidated?`Webhook validated on ${new Date(t.webhookValidatedAt).toLocaleString()}`:"Webhook not yet validated. Copy and configure the webhook URL in your provider dashboard.",children:t.webhookValidated?"✓ Webhook":"⚠ Webhook"}),e.jsx("div",{className:c("px-2 py-1 rounded-full text-xs font-medium",t.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"),children:t.isActive?"Active":"Inactive"})]})]}),e.jsx("h3",{className:"font-semibold text-gray-900 text-lg mb-1",children:t.name}),e.jsx("p",{className:"text-sm text-gray-600 uppercase mb-4",children:t.type}),e.jsx("div",{className:"text-xs text-gray-500 mb-4",children:e.jsxs("p",{children:["Created: ",new Date(t.createdAt).toLocaleDateString()]})}),n&&e.jsxs("div",{className:"mb-4 bg-gray-50 border border-gray-200 rounded-md p-3",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Webhook URL"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",readOnly:!0,value:n,className:"flex-1 px-2 py-1 text-xs bg-white border border-gray-300 rounded font-mono text-gray-700"}),e.jsx(r,{type:"button",variant:"default",size:"sm",onClick:g,children:h?"Copied!":"Copy"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(r,{variant:"default",size:"sm",onClick:y,className:"flex-1",children:"Test"}),e.jsx(r,{variant:"primary",size:"sm",layout:"plain",leftIcon:v,onClick:()=>a(`/integrations/${t.id}/edit`)}),e.jsx(r,{variant:"danger",layout:"plain",size:"sm",leftIcon:w,onClick:b})]})]})},I=({integrations:t,isLoading:a})=>a?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(N,{})}):t.length===0?e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-12 text-center",children:[e.jsx("p",{className:"text-gray-500 text-lg",children:"No integrations configured"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Add your first integration to start sending campaigns"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(s=>e.jsx(k,{integration:s},s.id))}),W=()=>{const t=x(),{loadIntegrations:a,integrations:s,isLoading:o}=u();return m.useEffect(()=>{a()},[]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Integrations"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Connect and manage your marketing channels"})]}),e.jsx(r,{onClick:()=>t("/integrations/create"),children:"Add Integration"})]}),e.jsx(I,{integrations:s,isLoading:o})]})};export{W as default};
//# sourceMappingURL=index-DetfID6t.js.map
