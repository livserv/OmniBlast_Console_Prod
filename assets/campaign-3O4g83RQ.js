import{n as o,c as n,e as t}from"../index.zPvR3SOO.js";const p=o((i,r)=>({campaigns:[],selectedCampaign:null,isLoading:!1,error:null,filters:{},loadCampaigns:async a=>{i({isLoading:!0,error:null});try{const e=new URLSearchParams;a?.status&&e.append("status",a.status),a?.templateId&&e.append("templateId",a.templateId);const s=await n.get(`/api/campaigns?${e.toString()}`);Array.isArray(s)?i({campaigns:s||[],isLoading:!1}):i({error:s.message||"Failed to load campaigns",isLoading:!1})}catch(e){i({error:e.message||"Failed to load campaigns",isLoading:!1})}},getCampaignById:async a=>{i({isLoading:!0,error:null});try{const e=await n.get(`/api/campaigns/${a}`);i({selectedCampaign:e,isLoading:!1})}catch(e){i({error:e.message||"Failed to load campaign",isLoading:!1})}},createCampaign:async a=>{i({isLoading:!0,error:null});try{await n.post("/api/campaigns",a),await r().loadCampaigns(r().filters),i({isLoading:!1})}catch(e){throw i({error:e.message||"Failed to create campaign",isLoading:!1}),e}},pauseCampaign:async a=>{i({isLoading:!0,error:null});try{await n.post(`/api/campaigns/${a}/pause`,{}),await r().loadCampaigns(r().filters),i({isLoading:!1})}catch(e){throw i({error:e.message||"Failed to pause campaign",isLoading:!1}),e}},resumeCampaign:async a=>{i({isLoading:!0,error:null});try{await n.post(`/api/campaigns/${a}/resume`,{}),await r().loadCampaigns(r().filters),i({isLoading:!1})}catch(e){throw i({error:e.message||"Failed to resume campaign",isLoading:!1}),e}},setFilters:a=>{i({filters:a}),r().loadCampaigns(a)},clearError:()=>i({error:null})}));async function c(i,r){const a=new URLSearchParams;return r?.status&&a.append("status",r.status),r?.limit&&a.append("limit",r.limit.toString()),r?.offset&&a.append("offset",r.offset.toString()),n.get(`/api/campaigns/${i}/recipients?${a.toString()}`)}function g(i){const r=sessionStorage.getItem("auth_token"),a=document.createElement("a");a.href=`${t.API_BASE_URL}/api/campaigns/${i}/export`,r&&(a.href+=`?token=${r}`),a.download="",document.body.appendChild(a),a.click(),document.body.removeChild(a)}export{g as d,c as g,p as u};
//# sourceMappingURL=campaign-3O4g83RQ.js.map
